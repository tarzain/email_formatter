<html>
    <style>
        .column {
            float: left;
            width: 33.33%;
        }
        /* Clear floats after the columns */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }
    </style>
    <script>
        var compute = function () {
            var names = [];
            var emails = [];
            var text = document.getElementById("text").value
            text = text.replace(/ </g, ",").replace(/>;/g, "\n");
            document.getElementById("csv").value = "Name,Email\n"+text;
        }
        var download = function () {
            var text = document.getElementById("csv").value
            let csvContent = "data:text/csv;charset=utf-8," + text;
            var encodedUri = encodeURI(csvContent);
            var link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "names_and_emails.csv");
            document.body.appendChild(link); // Required for FF

            console.log(encodedUri);
            link.click();
        }
    </script>
<body>
    Welcome!
    <br/>
    <div class="row">
        <div class="column">
            <label>Put email string here</label>
            <textarea id="text" rows="40"></textarea>
            <button onclick="compute()">Submit</button>
        </div>
        <div class="column">
            CSV formatted data:
            <textarea id="csv" rows="40"></textarea>
            <button onclick="download()">Download CSV</button>
        </div>
    </div>
</body>
</html>